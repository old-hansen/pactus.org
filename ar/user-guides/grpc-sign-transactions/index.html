<!DOCTYPE html>
<html lang="ar">
  

<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q4BTY819M6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "G-Q4BTY819M6");
</script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>How to sign transaction using gRPC? | بلوكشين بكتوس</title>
  <meta name="description" content="Building decentralized future together!" />

  <meta property="og:title" content="How to sign transaction using gRPC? | بلوكشين بكتوس" />
  <meta property="og:description" content="Building decentralized future together!" />
  <meta property="og:site_name" content="بلوكشين بكتوس" />
  <meta property="og:url" content="https://pactus.org/user-guides/grpc-sign-transactions/" />
  <meta property="og:type" content="website" />

  <link href="/assets/css/rouge.theme.vim.css" rel="stylesheet" />
  <link href="/assets/css/fontawesome.min.css" rel="stylesheet" />
  <link href="/assets/css/fontawesome.colorful.brands.css" rel="stylesheet" />
  <link href="/assets/css/custom.css" rel="stylesheet" />

  <script src="/assets/js/jquery-3.6.1.min.js"></script>
  <script src="/assets/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/js/anchor.min.js"></script>
  <script src="/assets/js/custom.js"></script>
  <script src="/assets/js/color-modes.js"></script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="shortcut icon" type="image/png" href="/favicon-128x128.png" />
  <link rel="icon" type="image/png" sizes="128x128" href="/favicon-128x128.png" />
  <link rel="icon" type="image/png" sizes="64x64" href="/favicon-64x64.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="msapplication-TileColor" content="#da532c" />
  <meta name="theme-color" content="#ffffff" />
</head>


  <body>
    <div class="shadow-sm rounded-bottom">
  <nav class="navbar rounded-bottom navbar-expand-lg bg-body">
    <div class="container-fluid">
      <a class="navbar-brand logo px-4 pt-2" href="/ar/">
        <img id="logo_image" src="https://pactus.org/assets/images/logos/pactus-logo-light.png" alt="Pactus blockchain" />
        <div class="logo"></div>
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown"
        aria-expanded="false"
        aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="topnav navbar-nav" style="margin-left: auto !important">
          <li class="nav-item dropdown ps-2">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              حول
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow-sm pe-0 fixed-menu">
              <li>
                <a class="nav-link dropdown-item ps-2" href="/ar/about/what-is-pactus/">
                  ما هو بكتوس؟
                </a>
              </li>
              <li>
                <a class="nav-link dropdown-item ps-2" href="/ar/about/roadmap/">
                  خارطة الطريق
                </a>
              </li>
              <li>
                <a class="nav-link dropdown-item ps-2" href="/ar/about/faq/">الأسئلة المتكررة</a>
              </li>
            </ul>
          </li>
          <li class="nav-item ps-2">
            <a class="nav-link" href="/ar/learn/">تعلم</a>
          </li>
          <li class="nav-item ps-2">
            <a class="nav-link" href="/ar/download/">تنزيل</a>
          </li>
          <li class="nav-item ps-2">
            <a class="nav-link" href="/ar/blog/">مدونة</a>
          </li>
          <li class="nav-item dropdown ps-2">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              الموارد
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow-sm pe-0 fixed-menu">
              <li>
                <a class="nav-link dropdown-item ps-2" href="/ar/community/">
                  المجتمع
                </a>
              </li>
              <li>
                <a class="nav-link dropdown-item ps-2" href="/ar/contributing/">
                  المساهمة
                </a>
              </li>
              <li>
                <a class="nav-link dropdown-item ps-2" href="/ar/user-guides/">
                  دلائل المستخدم
                </a>
              </li>
              <li>
                <a
                  class="nav-link dropdown-item ps-2"
                  href="https://github.com/pactus-project/Whitepaper/releases/latest/download/pactus_whitepaper.pdf"
                  target="_blank"
                  rel="noopener noreferrer">
                  Whitepaper <i class="fa fa-external-link" aria-hidden="true"></i>
                </a>
              </li>
              <li>
                <a
                  class="nav-link dropdown-item ps-2"
                  href="https://pacviewer.com/"
                  target="_blank"
                  rel="noopener noreferrer">
                  Block explorer <i class="fa fa-external-link" aria-hidden="true"></i>
                </a>
              </li>
              <li>
                <a
                  class="nav-link dropdown-item ps-2"
                  href="https://github.com/pactus-project/"
                  target="_blank"
                  rel="noopener noreferrer">
                  Source code <i class="fa fa-external-link" aria-hidden="true"></i>
                </a>
                <a class="nav-link dropdown-item ps-2" href="https://pips.pactus.org" target="_blank">
                  PIPs <i class="fa fa-external-link" aria-hidden="true"></i>
                </a>
              </li>
            </ul>
          </li>
          <li class="nav-item dropdown ps-2">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <i class="fa-solid fa-fw fa-earth-americas"></i>
    <span class="m-0 p-0">العربية</span>
  </a>
  <ul class="dropdown-menu dropdown-menu-end shadow-sm pe-0 fixed-menu">
      
    <li>
      <a class="nav-link dropdown-item ps-3" href="/user-guides/grpc-sign-transactions/">English</a>
    </li>
         
    <li>
      <a class="nav-link dropdown-item ps-3" href="/zh/user-guides/grpc-sign-transactions/">中文</a>
    </li>
     
  </ul>
</li>
 <li class="nav-item dropdown ps-2 ms-0">
  <button
    class="btn btn-link nav-link dropdown-toggle"
    id="bd-theme"
    type="button"
    aria-expanded="false"
    data-bs-toggle="dropdown"
    data-bs-display="static"
    aria-label="Toggle theme (auto)">
    <i id="bd-theme-icon" class="fa-regular fa-fw fa-circle-half-stroke"></i>
    <span class="d-lg-none bd-theme-text m-0 p-0" id="bd-theme-text">Toggle theme</span>
  </button>
  <ul class="dropdown-menu dropdown-menu-end shadow-sm pe-0 fixed-menu">
    <li>
      <button type="button" class="dropdown-item ps-2" data-bs-theme-value="light">
        <i class="fa-regular fa-fw fa-sun"></i>
        Light
      </button>
    </li>
    <li>
      <button type="button" class="dropdown-item ps-2" data-bs-theme-value="dark">
        <i class="fa-solid fa-fw fa-moon"></i>
        Dark
      </button>
    </li>
  </ul>
</li>

        </ul>
      </div>
    </div>
  </nav>
</div>

    <div class="container-fluid shadow-sm rounded mt-3 mb-3">
      <div class="row bg-body rounded p-3" dir="rtl">
        <div class="col-lg-2"></div>
        <div class="col-lg-8 content">
          <h1 id="how-to-sign-transaction-using-grpc">How to sign transaction using gRPC?</h1>

<h2 id="preface">Preface</h2>

<p>The Pactus Blockchain provides a gRPC interface that allows users to interact with the blockchain and native wallet.
This is ideal for merchants and users who want to create, sign, and broadcast transactions using their local node.
This tutorial will guide you step-by-step on how to use gRPC to sign transactions.</p>

<h2 id="setup-node">Setup node</h2>

<h3 id="initialize-the-node">Initialize the node</h3>

<p>To follow along with this tutorial, you’ll first need to set up and run a localnet blockchain, which is suitable for testing:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build/pactus-daemon init <span class="se">\</span>
  <span class="nt">--localnet</span> <span class="se">\</span>
  <span class="nt">--working-dir</span> ./pactus-localnet <span class="se">\</span>
  <span class="nt">--password</span> <span class="s2">"super-secret-password"</span> <span class="se">\</span>
  <span class="nt">--val-num</span> 7 <span class="se">\</span>
  <span class="nt">--restore</span> <span class="s2">"fish cool avoid history kitten quick olive purchase blossom grocery cool treat"</span>
</code></pre></div></div>

<p>This command initializes a Pactus blockchain as a localnet.
The purpose of this network is for testing.
The above command actually restores a node from the given mnemonic.
This helps you to create the same wallet with this tutorial. The first two addresses in this wallet are:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tpc1zhv2hq30rnu9lkjusgwqk4f5qfdr72sd2mndnn6
tpc1zsrvuvn0j80vc3we5q44apjrv8j7ta5807z7xc7
</code></pre></div></div>

<p>We are going to transfer 1 PAC from the first account to the second one.</p>

<h3 id="run-the-node">Run the node</h3>

<p>Now you can run the node simply with this command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./build/pactus-daemon start <span class="se">\</span>
  <span class="nt">--working-dir</span> ./pactus-localnet <span class="se">\</span>
  <span class="nt">--password</span> <span class="s2">"super-secret-password"</span>
</code></pre></div></div>

<p>By running the node, you will see that it starts creating blocks, and
therefore the reward account address will be rewarded locally.
We can use this balance for testing purposes.</p>

<h3 id="interact-with-the-node">Interact with the node</h3>

<p>Open another terminal and run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./pactus-shell <span class="nt">--server-addr</span> localhost:50052 <span class="se">\</span>
  blockchain get-blockchain-info
</code></pre></div></div>

<p>It should print information about the localnet blockchain.
The <code class="language-plaintext highlighter-rouge">pactus-shell</code> application uses gRPC to interact with the blockchain.
In this tutorial, we use <code class="language-plaintext highlighter-rouge">pactus-shell</code> to interact with the blockchain.
You can either use gRPC-gateway REST APIs or make direct gRPC calls to interact with the node.
They are more or less similar and all interact with the node using gRPC endpoints.</p>

<h2 id="signing-transitions">Signing Transitions</h2>

<h3 id="create-raw-transaction">Create raw transaction</h3>

<p>To sign a transaction, we first need to create a raw transaction and then sign it.
We can use the <code class="language-plaintext highlighter-rouge">get_raw_transfer_transaction</code> method to create a raw transfer transaction.
Similar methods can be used to create raw bond, unbond, and withdraw transactions.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./pactus-shell <span class="nt">--server-addr</span> localhost:50052 <span class="se">\</span>
  transaction get-raw-transfer-transaction <span class="se">\</span>
    <span class="nt">--sender</span> tpc1zhv2hq30rnu9lkjusgwqk4f5qfdr72sd2mndnn6 <span class="se">\</span>
    <span class="nt">--receiver</span> tpc1zsrvuvn0j80vc3we5q44apjrv8j7ta5807z7xc7 <span class="se">\</span>
    <span class="nt">--amount</span> 1
<span class="o">{</span>
  <span class="s2">"rawTransaction"</span>:  <span class="s2">"AgGWBQAA6AcAAQK7FXBF458L+0uQQ4FqpoBLR+VBqgKA2cZN8jvZiLs0BWvQyGw8vL7Q7wE="</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The sender account is the first reward address in the wallet, therefore it should have some coins in its account.</p>

<p><i class="fa-solid fa-triangle-exclamation"></i> Please note that the amount here is in atomic units.
There is a Working-In-Progress PR to accept and return all amounts in PAC units (10^9).</p>

<h3 id="sign-transaction">Sign transaction</h3>

<p>Now you can sign this raw transaction. To sign a transaction, first, we need to load a wallet.
At the time of writing this document, Pactus only supports the “default_wallet”.
Soon, creating wallets through gRPC and loading them will be supported.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./pactus-shell <span class="nt">--server-addr</span> localhost:50052 <span class="se">\</span>
  wallet load-wallet <span class="nt">--wallet-name</span> <span class="s2">"default_wallet"</span>
<span class="o">{</span>
  <span class="s2">"walletName"</span>:  <span class="s2">"default_wallet"</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now that the “default_wallet” is loaded, we can proceed to sign the raw transaction:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./pactus-shell <span class="nt">--server-addr</span> localhost:50052 <span class="se">\</span>
  wallet sign-raw-transaction <span class="se">\</span>
    <span class="nt">--wallet-name</span> <span class="s2">"default_wallet"</span> <span class="se">\</span>
    <span class="nt">--password</span> <span class="s2">"super-secret-password"</span> <span class="se">\</span>
    <span class="nt">--raw-transaction</span> <span class="s2">"AgGWBQAA6AcAAQK7FXBF458L+0uQQ4FqpoBLR+VBqgKA2cZN8jvZiLs0BWvQyGw8vL7Q7wE="</span>
<span class="o">{</span>
  <span class="s2">"transactionId"</span>: <span class="s2">"JZqOnVq87eWBd67LvF1bYIYiXjy/orru/vSmrir9iGA="</span>,
  <span class="s2">"signedRawTransaction"</span>: <span class="s2">"AAGWBQAA6AcAAQK7FXBF458L+0uQQ4FqpoBLR+VBqgKA2cZN8jvZiLs0BWvQyGw8vL7Q7wG0VVIZZ6CfW7J91B0lcw8Ji7+hgRbB88uT8pWyxf9cTqWGLL3sIbnNA1zQol+GtO6C645tYQYi6FWxtOcgYuurrsTapgSa911ZBuToQxJ8D5hj/BPqBiAtfMFwSWlXXbUKr4CGOCCPsA+IEAY0zVpxFa/bl3VMcZF4mgeAoJLZ3hcjz2leLJG9oVvNdwqvu0U="</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Transaction successfully signed.</p>

<h2 id="broadcast-signed-transaction">Broadcast signed transaction</h2>

<p>Now you can broadcast the signed transaction:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./pactus-shell <span class="nt">--server-addr</span> localhost:50052 <span class="se">\</span>
  transaction broadcast-transaction <span class="se">\</span>
    <span class="nt">--signed-raw-transaction</span> <span class="s2">"AAGWBQAA6AcAAQK7FXBF458L+0uQQ4FqpoBLR+VBqgKA2cZN8jvZiLs0BWvQyGw8vL7Q7wG0VVIZZ6CfW7J91B0lcw8Ji7+hgRbB88uT8pWyxf9cTqWGLL3sIbnNA1zQol+GtO6C645tYQYi6FWxtOcgYuurrsTapgSa911ZBuToQxJ8D5hj/BPqBiAtfMFwSWlXXbUKr4CGOCCPsA+IEAY0zVpxFa/bl3VMcZF4mgeAoJLZ3hcjz2leLJG9oVvNdwqvu0U="</span>
<span class="o">{</span>
  <span class="s2">"id"</span>: <span class="s2">"JZqOnVq87eWBd67LvF1bYIYiXjy/orru/vSmrir9iGA="</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Transaction successfully broadcasted.</p>

<h2 id="production-security-considerations">Production Security Considerations</h2>

<p>In this tutorial, we utilized a localnet version of Pactus.
For production purposes, you’ll need to set up the node for the Mainnet and synchronize it with the network.
Additionally, in production, the wallet service is disabled by default.
You can enable the wallet service in the configuration file.</p>

<p>When signing transactions in production, you need to prioritize the security of the wallet.
Make sure you have set a strong password for the native wallet.
Ensure that it is called on localhost for safety.
If you intend to call it on a remote server, there are several security measures to consider:</p>

<ul>
  <li>Ensure SSL is installed using Nginx to secure the connections.</li>
  <li>Secure the API using a password (currently under development; see here: <a href="https://pips.pactus.org/PIPs/pip-20">PIP-20</a>).</li>
</ul>


          <div class="row p-3">
            <div class="col text-end">
              <a href="/ar/user-guides/">« Back to the user guides list</a>
            </div>
          </div>
          <div class="row edit-bar">
  <div class="col">
    <a class="p-2 edit-btn" href="https://github.com/pactus-project/pactus.org/edit/main/website/user-guides/grpc-sign-transactions/index.md">
      <i class="fa fa-pen-to-square" aria-hidden="true"></i>
      عدل هذه الصفحة
    </a>
      |
    <a
      class="p-2 edit-btn"
      href="https://github.com/pactus-project/pactus.org/edit/main/website/_i18n/ar/user-guides/grpc-sign-transactions/index.md">
      <i class="fa fa-language" aria-hidden="true"></i>
      تحسين الترجمة
    </a>
    
  </div>
</div>

        </div>
        <div class="col-lg-2"></div>
      </div>
    </div>
    <div class="shadow-sm rounded-top footer anchor">
  <footer class="container-fluid py-4 pb-0 mb-0">
    <div class="container pb-0 mb-0">
      <div class="row around-xs footer-wrapper">
        <div class="col-md-3 col-xs-6">
          <div class="section">مشروع بكتوس</div>
          <ul class="list-unstyled">
            <li>
              <a class="anchor" href="/ar/about/what-is-pactus/">ما هو بكتوس؟</a>
            </li>
            <li>
              <a class="anchor" href="/ar/about/roadmap/">خارطة الطريق</a>
            </li>
            <li>
              <a class="anchor" href="/ar/download/">تنزيل</a>
            </li>
            <li>
              <a class="anchor" href="/ar/learn/">تعلم</a>
            </li>
            <li>
              <a class="anchor" href="/ar/blog/">مدونة</a>
            </li>
            <li>
              <a class="anchor" href="/ar/about/faq/">الأسئلة المتكررة</a>
            </li>
          </ul>
        </div>
        <div class="col-md-3 col-xs-6">
          <div class="section">الموارد</div>
          <ul class="list-unstyled">
            <li>
              <a class="anchor" href="/ar/community/">المجتمع</a>
            </li>
            <li>
              <a class="anchor" href="/ar/contributing/">المساهمة</a>
            </li>
            <li>
              <a class="anchor" href="/ar/user-guides/">دلائل المستخدم</a>
            </li>
            <li>
              <a
                class="anchor"
                href="https://github.com/pactus-project/Whitepaper/releases/latest/download/pactus_whitepaper.pdf"
                target="_blank">
                Whitepaper <i class="fa fa-external-link" aria-hidden="true"></i>
              </a>
            </li>
            <li>
              <a class="anchor" href="https://pacviewer.com/" target="_blank" rel="noopener noreferrer">
                Block explorer <i class="fa fa-external-link" aria-hidden="true"></i>
              </a>
            </li>
            <li>
              <a class="anchor" href="https://github.com/pactus-project/" target="_blank" rel="noopener noreferrer">
                Source code <i class="fa fa-external-link" aria-hidden="true"></i>
              </a>
            </li>

            <li>
              <a class="anchor" href="https://pips.pactus.org" target="_blank">PIPs <i class="fa fa-external-link" aria-hidden="true"></i></a>
            </li>
          </ul>
        </div>
        <div class="col-md-3 col-xs-6">
          <div class="section">المجتمع</div>
          <ul class="list-unstyled">
            <li>
              <a class="anchor" href="https://discord.gg/H5vZkNnXCu">
                <i class="fa-brands fa-fw fa-discord"></i>
                بكتوس على ديسكورد
              </a>
            </li>
            <li>
              <a class="anchor" href="https://x.com/pactuschain/">
                <i class="fa-brands fa-fw fa-twitter"></i>
                بكتوس على تويتر
              </a>
            </li>
            <li>
              <a class="anchor" href="https://t.me/pactusblockchain">
                <i class="fa-brands fa-fw fa-telegram"></i>
                بكتوس على تيليجرام
              </a>
            </li>
            <li>
              <a class="anchor" href="https://linkedin.com/company/pactus-blockchain">
                <i class="fa-brands fa-fw fa-linkedin"></i>
                بكتوس على لينكدإن
              </a>
            </li>
            <li>
              <a class="anchor" href="https://bitcointalk.org/index.php?topic=5480867.0">
                <i class="fa-brands fa-fw fa-bitcoin"></i>
                Pactus on Bitcoin Talk
              </a>
            </li>
          </ul>
        </div>
        <div class="col-md-3 col-xs-6">
          <ul class="list-unstyled">
            <li>
              <img alt="Pactus" src="https://pactus.org/assets/images/logos/text-logo.png" />
            </li>

            <li>
              <a class="anchor" href="https://goo.gl/maps/aYMYxy6pWJzAtxf56">
                <i class="fa-solid fa-map"></i>
                Dammstrasse 16, 6300 Zug, Switzerland
              </a>
            </li>
            <li>
              <a class="anchor" href="mailto:info@pactus.org">
                <i class="fa-solid fa-envelope"></i>
                info@pactus.org
              </a>
            </li>
            <li>
              <a class="anchor" href="tel:+41767011335">
                <i class="fa-solid fa-phone"></i>
                +41 76 701 13 35
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row around-xs pt-4 pb-0 m-0">
        <div class="col d-flex justify-content-center">
          <ul class="list-inline list-unstyled">
            <li class="list-inline-item">
              <a href="https://pactus.org/term-of-use/" class="px-2 legal">
                <i class="fa-solid fa-gavel"></i>
                Term of Use
              </a>
            </li>
            <li class="list-inline-item">
              <a href="https://pactus.org/sitemap.xml" class="px-2 legal">
                <i class="fa-solid fa-sitemap"></i>
                Sitemap
              </a>
            </li>
            <li class="list-inline-item">
              <a href="https://pactus.org/feed.xml" class="px-2 legal">
                <i class="fa-solid fa-rss"></i>
                RSS Feed
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </footer>
</div>

    <script>
      anchors.add();
    </script>
  </body>
</html>
